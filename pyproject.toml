[project]
name = "paws_bakery"
version = "0.5.0"

[tool.black]
preview = true

[tool.ruff]
fix = true
target-version = "py310"

# exclude = []
# include = [".vscode/*.py"]

[tool.ruff.lint]
extend-select = ["E", "F", "B", "W", "C", "Q", "D"]
# extend-fixable = ["W505", "E501"]
unfixable = ["F401"]
external = ["B036"]

[tool.ruff.lint.per-file-ignores]
# "__init__.py" = ["E402"]
"setup.py" = ["D1"]
"**/{tests,docs,tools}/*" = ["D1"]

[tool.ruff.lint.flake8-bandit]
check-typed-exception = true

[tool.ruff.lint.flake8-import-conventions.extend-aliases]
"bpy.types" = "blt"
"bpy.props" = "blp"

[tool.ruff.lint.pycodestyle]
max-doc-length = 88

[tool.ruff.lint.pydocstyle]
convention = "pep257"
# ignore-var-parameters = true

[tool.ruff.format]
# preview = true
docstring-code-format = true
# docstring-code-line-length = 88
line-ending = "lf"


[tool.semantic_release]
allow_zero_version = true
commit_message = "chore(release): v{version}\n\nAutomatically generated by python-semantic-release"
version_toml = [
    "pyproject.toml:project.version",
    "src/paws_bakery/blender_manifest.toml:version",
]

[tool.semantic_release.branches.main]
match = "^(main)$"

[tool.semantic_release.branches.release]
match = "^(release)/.+"

[tool.semantic_release.branches.alpha]
match = "^(feat|fix|perf)/.+"
prerelease = true
# prerelease_token = "rc"

[tool.semantic_release.branches.ci]
match = "^(ci)/.+"
prerelease = true
prerelease_token = "ci-test"

[tool.semantic_release.changelog]
exclude_commit_patterns = [
    '''chore(?:\([^)]*?\))?: .+''',
    '''ci(?:\([^)]*?\))?: .+''',
    '''refactor(?:\([^)]*?\))?: .+''',
    '''style(?:\([^)]*?\))?: .+''',
    '''test(?:\([^)]*?\))?: .+''',
    '''build\((?!deps\): .+)''',
    '''Initial [Cc]ommit.*''',
]

# [tool.semantic_release.changelog.default_templates]
# changelog_file = "CHANGELOG.md"
# output_format = "md"
# mask_initial_release = true

# [tool.semantic_release.remote]
# name = "origin"
# type = "github"
# ignore_token_for_push = false
# insecure = false

[tool.semantic_release.publish]
dist_glob_patterns = ["paws_bakery-*.zip"]
# upload_to_vcs_release = true
